{% extends "base.html" %}

{% block title %}Set New Password{% endblock %}

{% block content %}
<div class="container d-flex justify-content-center align-items-center" style="min-height: 90vh; background-color: #f9f9f9;"> <!-- Added background color -->
  <div class="card border-0 shadow-sm" style="width: 95%; max-width: 600px; background-color: #f5e9dc;">
    <div class="card-body p-4">
      <h3 class="text-center mb-4 fw-bold" style="color: #5a4a42; font-size: 1.5rem;">Set New Password</h3>
      
      {% if validlink %}
      <div class="row">
        <!-- Left Column - Form -->
        <div class="col-md-6 pe-md-3">
          <form method="POST" class="mx-auto" style="max-width: 100%;">
            {% csrf_token %}
            
            <div class="mb-3">
              <label class="form-label fw-medium" style="font-size: 1rem;">New Password</label>
              <input type="password" name="new_password1" class="form-control" required
                     style="padding: 0.7rem; font-size: 1rem; border: 1px solid #d2b48c; border-radius: 6px;">
            </div>
            
            <div class="mb-3">
              <label class="form-label fw-medium" style="font-size: 1rem;">Confirm Password</label>
              <input type="password" name="new_password2" class="form-control" required
                     style="padding: 0.7rem; font-size: 1rem; border: 1px solid #d2b48c; border-radius: 6px;">
            </div>
            
            <button type="submit" class="btn w-100 py-2 fw-medium" 
                    style="background-color: burlywood; color: white; font-size: 1rem;">
              Change Password
            </button>
          </form>
        </div>
        
        <!-- Right Column - Password Help -->
        <div class="col-md-6 ps-md-3 mt-4 mt-md-0">
          <div class="bg-white p-3 rounded h-100" style="font-size: 0.95rem; color: #5a4a42; line-height: 1.6;">
            <h5 class="fw-bold mb-3" style="font-size: 1.1rem;">Password Requirements:</h5>
            <ul class="mb-0 ps-3">
              <li class="mb-2">Can't be too similar to personal info</li>
              <li class="mb-2">Must contain at least 8 characters</li>
              <li class="mb-2">Can't be a common password</li>
              <li class="mb-3">Can't be entirely numeric</li>
            </ul>
          </div>
        </div>
      </div>
      {% else %}
      <div class="alert alert-danger text-center py-3" style="font-size: 1rem;">
        The password reset link was invalid, possibly because it has already been used.
        Please request a new password reset.
      </div>
      {% endif %}
      
      <div class="text-center pt-4">
        <span class="fw-bold me-2" style="font-size: 1rem;">Remember your password?</span>
        <a href="{% url 'login' %}?next={{ request.path }}" style="color: burlywood; font-size: 1rem; font-weight: 500;">Login</a>
      </div>
    </div>
  </div>
</div>

<style>
  .navbar { display: none !important; }
  
  body {
    background-color: #f9f9f9 !important; /* Ensures full page background */
  }
  
  .form-control:focus {
    border-color: burlywood;
    box-shadow: 0 0 0 0.25rem rgba(210, 180, 140, 0.25);
    outline: none;
    transition: all 0.3s ease;
  }
  
  .btn:hover {
    background-color: #d2a679 !important;
  }
</style>
{% endblock %}